<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">

    <title>Get Image Every Day</title>

    <style>
        @font-face {
            font-family: call-me-maybe;
            src: url("call-me-maybe.ttf");
        }
    </style>
</head>
<body>
    <canvas id="canvas">
        Not supported
    </canvas>
    <br>
    <a href="" id="link">Download</a>

    <script type = "text/javascript" > 
        var start_date = new Date("9/11/2021");
        var today = new Date();
        
        var Difference_In_Time = today.getTime() - start_date.getTime();
        
        var Difference_In_Days = Math.ceil(Difference_In_Time / (1000 * 3600 * 24));
    </script>

    <script type="text/javascript">
        const canvasWidth = 400;
        const canvasHeight = 60;
        const imageGap = 5;
        const fontSize = canvasHeight - 20;
        let fontFace = new FontFace("call-me-maybe", 'url("call-me-maybe.ttf")');

        var canvas = document.querySelector("canvas#canvas");
        canvas.width = canvasWidth;
        canvas.height = canvasHeight;

        fontFace.load().then(function() {
            function drawImages(src, gapX, gapY, x, y) {
                context = canvas.getContext("2d");
                var img = new Image();
                img.crossOrigin = "anonymous";
                
                img.onload = function() {
                    context.drawImage(img, gapX, gapY, x, y);  
                }

                img.src = src;
            }

            function drawText(text) {
                context = canvas.getContext("2d");
                context.font = fontSize + 'pt "call-me-maybe"';
                context.fillStyle = "white";
                context.strokeStyle = "black";
                var measuredText = context.measureText(text);
                context.strokeText(text, (canvasWidth / 2) - (measuredText.width / 2), canvasHeight - (imageGap * 2));
                context.fillText(text, (canvasWidth / 2) - (measuredText.width / 2), canvasHeight - (imageGap * 2));
            }

            drawText("DAY " + Difference_In_Days);
            drawImages("sniff.png", 0, imageGap, canvasHeight - (imageGap * 2), canvasHeight - (imageGap * 2));
            drawImages("sniff.png", canvasWidth - (canvasHeight - (imageGap * 2)), imageGap, canvasHeight - (imageGap * 2), canvasHeight - (imageGap * 2));

            setTimeout(function() {
                var link = document.querySelector('#link');
                link.setAttribute('href', canvas.toDataURL("image/png"));
                link.setAttribute('download', 'day.png');
                link.click();
            }, 2000)
        });
    </script>
</body>
</html>
